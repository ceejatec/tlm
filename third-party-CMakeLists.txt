# Note: This file lives in git at 'tlm/third-party-CMakeLists.txt'.
# It is copied by repo into third_party/CMakeLists.txt, so should be
# considered read-only in that location.

# Ensure the third party code is position independent because our
# code is always built as position-independent.
# This setting is specifically required for HdrHistogram_c.
set(CMAKE_POSITION_INDEPENDENT_CODE ON)

add_subdirectory(gsl-lite EXCLUDE_FROM_ALL)

# Disable building examples and tests for HdrHistogram.
set(HDR_HISTOGRAM_BUILD_PROGRAMS OFF CACHE BOOL "Build hdr_histogram tests and examples")
add_subdirectory(HdrHistogram_c)

# Disable building anything we don't use.
set(SIMDUTF_SINGLE_HEADER OFF)
set(SIMDUTF_BENCHMARKS OFF)
set(SIMDUTF_TESTS OFF)
set(SIMDUTF_ICONV OFF)
set(SIMDUTF_TOOLS OFF)
# Explicitly specify C++ version for simdutf. The library "targets" C++11,
# however, it uses binary literals, which are a C++14 feature and we get
# warnings.
set(SIMDUTF_CXX_STANDARD ${CMAKE_CXX_STANDARD})
# Add simdutf
add_subdirectory(simdutf EXCLUDE_FROM_ALL SYSTEM)
